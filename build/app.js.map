{"version":3,"sources":["../src/app.js"],"names":["init","app","use","path","join","__dirname","superAdmin","manager","Category","adminCenter","Products","promotion","center","logs","notFound","errorHandler","then","listen","process","env","PORT","console","log"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAGO,IAAMA,IAAI,GAAG,SAAPA,IAAO,GAAM;AAEtB;AACAC,eAAIC,GAAJ,CAAQ,SAAR,EAAmB,wBAAWC,iBAAKC,IAAL,CAAUC,SAAV,EAAqB,QAArB,CAAX,CAAnB;;AACAJ,eAAIC,GAAJ,CAAQ,yBAAR;;AACAD,eAAIC,GAAJ,CAAQ,uBAAR;;AACAD,eAAIC,GAAJ,CAAQ,wBAAO,MAAP,CAAR;;AACAD,eAAIC,GAAJ,CAAQ,oBAAR,EAPsB,CAStB;;;AACAD,eAAIC,GAAJ,CAAQ,QAAR,EAAkBI,kBAAlB;;AACAL,eAAIC,GAAJ,CAAQ,UAAR,EAAoBK,eAApB;;AACAN,eAAIC,GAAJ,CAAQ,WAAR,EAAqBM,gBAArB;;AACAP,eAAIC,GAAJ,CAAQ,QAAR,EAAkBO,mBAAlB;;AACAR,eAAIC,GAAJ,CAAQ,UAAR,EAAoBQ,gBAApB;;AACAT,eAAIC,GAAJ,CAAQ,YAAR,EAAsBS,iBAAtB;;AACAV,eAAIC,GAAJ,CAAQ,SAAR,EAAmBU,cAAnB;;AACAX,eAAIC,GAAJ,CAAQ,MAAR,EAAgBW,YAAhB,EAjBsB,CAmBtB;;;AACAZ,eAAIC,GAAJ,CAAQY,oBAAR,EApBsB,CAqBtB;;;AACAb,eAAIC,GAAJ,CAAQa,wBAAR,EAtBsB,CAwBtB;;;AACA,6BAAaC,IAAb,CAAkB,YAAM;AACpBf,iBAAIgB,MAAJ,CAAWC,OAAO,CAACC,GAAR,CAAYC,IAAvB,EAA6B,YAAM;AAC/BC,MAAAA,OAAO,CAACC,GAAR,CAAY,+BAA+BJ,OAAO,CAACC,GAAR,CAAYC,IAAvD;AACH,KAFD;AAGH,GAJD;AAKH,CA9BM","sourcesContent":["import 'dotenv/config';\r\nimport { json, static as staticPath } from \"express\"\r\nimport path from 'path'\r\nimport helmet from 'helmet';\r\nimport cors from 'cors';\r\nimport morgan from 'morgan';\r\nimport { app, connection } from './config';\r\nimport { errorHandler, notFound } from './middleware';\r\nimport { superAdmin, logs, Category, adminCenter, Products, promotion, center, manager } from './routes';\r\n\r\n\r\nexport const init = () => {\r\n\r\n    //global middlewares\r\n    app.use('/static', staticPath(path.join(__dirname, 'public')))\r\n    app.use(helmet());\r\n    app.use(cors());\r\n    app.use(morgan('tiny'));\r\n    app.use(json());\r\n\r\n    //routes\r\n    app.use(\"/super\", superAdmin);\r\n    app.use(\"/manager\", manager)\r\n    app.use(\"/category\", Category);\r\n    app.use(\"/admin\", adminCenter);\r\n    app.use(\"/product\", Products);\r\n    app.use(\"/promotion\", promotion);\r\n    app.use(\"/center\", center);\r\n    app.use(\"/log\", logs);\r\n\r\n    // 404\r\n    app.use(notFound)\r\n    // Error handler\r\n    app.use(errorHandler)\r\n\r\n    //init db with server\r\n    connection().then(() => {\r\n        app.listen(process.env.PORT, () => {\r\n            console.log(\"Server is running on port \" + process.env.PORT)\r\n        })\r\n    })\r\n} \r\n"],"file":"app.js"}