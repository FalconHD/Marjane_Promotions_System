{"version":3,"sources":["../../src/middleware/helpers.js"],"names":["calculateFidelity","pourcentage","name","Error","isMorning","req","res","next","currentTime","Date","currentHour","getHours","localLogs","newLog","fs","readFile","readFileCallback","err","data","console","log","logs","JSON","parse","push","json","stringify","writeFile"],"mappings":";;;;;;;;;AAAA;;AAEO,IAAMA,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,WAAD,QAA2B;AAAA,MAAXC,IAAW,QAAXA,IAAW;;AACxD,MAAID,WAAW,GAAG,EAAlB,EAAsB;AAClB,QAAIC,IAAI,IAAI,aAAZ,EAA2B;AACvB,aAAQ,CAACD,WAAD,GAAe,CAAhB,GAAqB,EAA5B;AACH,KAFD,MAEO;AACH,UAAI,CAACA,WAAD,GAAe,EAAnB,EAAuB;AACnB,eAAQ,CAACA,WAAD,GAAe,CAAhB,GAAqB,EAA5B;AACH,OAFD,MAEO;AACH,cAAM,IAAIE,KAAJ,CAAU,4CAAV,CAAN;AACH;AACJ;AACJ,GAVD,MAUO;AACH,UAAM,IAAIA,KAAJ,CAAU,6BAAV,CAAN;AACH;AACJ,CAdM;;;;AAiBA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACzC,MAAMC,WAAW,GAAG,IAAIC,IAAJ,EAApB;AACA,MAAMC,WAAW,GAAGF,WAAW,CAACG,QAAZ,EAApB;;AACA,MAAID,WAAW,IAAI,CAAf,IAAoBA,WAAW,GAAG,EAAtC,EAA0C;AACtCH,IAAAA,IAAI;AACP,GAFD,MAEO;AACHA,IAAAA,IAAI,CAAC,IAAIJ,KAAJ,CAAU,2BAAV,CAAD,CAAJ;AACH;AACJ,CARM;;;;AAYA,IAAMS,SAAS,GAAG,SAAZA,SAAY,CAACC,MAAD,EAAY;AACjCC,iBAAGC,QAAH,CAAY,sBAAZ,EAAoC,MAApC,EAA4C,SAASC,gBAAT,CAA0BC,GAA1B,EAA+BC,IAA/B,EAAqC;AAC7E,QAAID,GAAJ,EAAS;AACLE,MAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACH,KAFD,MAEO;AACH,UAAII,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWL,IAAX,CAAX;AACAG,MAAAA,IAAI,CAACG,IAAL,CAAUX,MAAV;AACA,UAAIY,IAAI,GAAGH,IAAI,CAACI,SAAL,CAAeL,IAAf,EAAoB,IAApB,EAAyB,CAAzB,CAAX;;AACAP,qBAAGa,SAAH,CAAa,sBAAb,EAAqCF,IAArC,EAA2C,MAA3C,EAAkD,UAACR,GAAD,EAAKC,IAAL,EAAY;AAACC,QAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AAAmB,OAAlF;AACH;AACJ,GATD;AAUH,CAXM","sourcesContent":["import fs from \"fs\"\r\n\r\nexport const calculateFidelity = (pourcentage, { name }) => {\r\n    if (pourcentage < 50) {\r\n        if (name != \"Electronics\") {\r\n            return (+pourcentage / 5) * 50\r\n        } else {\r\n            if (+pourcentage < 20) {\r\n                return (+pourcentage / 5) * 50\r\n            } else {\r\n                throw new Error(\"The PR of Electronics is not more than 20%\")\r\n            }\r\n        }\r\n    } else {\r\n        throw new Error(\"the PR is not more than 50%\")\r\n    }\r\n}\r\n\r\n\r\nexport const isMorning = (req, res, next) => {\r\n    const currentTime = new Date()\r\n    const currentHour = currentTime.getHours()\r\n    if (currentHour >= 8 && currentHour < 12) {\r\n        next()\r\n    } else {\r\n        next(new Error(\"The promotions are closed\"))\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const localLogs = (newLog) => {\r\n    fs.readFile('src/public/logs.json', 'utf8', function readFileCallback(err, data) {\r\n        if (err) {\r\n            console.log(err);\r\n        } else {\r\n            let logs = JSON.parse(data);\r\n            logs.push(newLog);\r\n            let json = JSON.stringify(logs,null,3);\r\n            fs.writeFile('src/public/logs.json', json, 'utf8',(err,data)=>{console.log(data);});\r\n        }\r\n    });\r\n}"],"file":"helpers.js"}